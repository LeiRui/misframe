<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" ARP 101. &middot;  Misframe" />
  <meta property="og:site_name" content="Misframe" />
  <meta property="og:url" content="http://misfra.me/arp-101" />
  
  
  <meta property="og:type" content="article" />
  
  <meta property="og:article:author" content="https://facebook.com/PreetamJinka" />
  
  <meta property="og:article:published_time" content="2014-06-10T00:00:00Z" />
  
  

  <title>
     ARP 101. &middot;  Misframe
  </title>

  <link rel="stylesheet" href="http://misfra.me/css/bootstrap.min.css" />
  <link rel="stylesheet" href="http://misfra.me/css/main.css" />
  <link rel="stylesheet" href="http://misfra.me/css/font-awesome.min.css" />
  <link rel="stylesheet" href="http://misfra.me/css/github.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type="text/css">
  <link rel="shortcut icon" href="http://misfra.me/images/favicon.ico" />
  <link rel="apple-touch-icon" href="http://misfra.me/images/apple-touch-icon.png" />
  
</head>
<body>
  <header class="global-header">
    <section class="header-text">
      <h1><a href="http://misfra.me/">Misframe</a></h1>
      
      <div class="sns-links hidden-print">
  
  <a href="https://twitter.com/PreetamJinka" target="_blank">
      <i class="fa fa-twitter"></i>
  </a>
  
  
  <a href="https://facebook.com/PreetamJinka" target="_blank">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  <a href="https://github.com/PreetamJinka" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://jp.linkedin.com/in/preetamjinka" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
</div>

      
      <a href="http://misfra.me/" class="btn-header btn-back hidden-xs">
        <i class="fa fa-angle-left"></i>
        &nbsp;Home
      </a>
      
      
    </section>
  </header>
  <main class="container">


<article>
  <header>
    <h1 class="text-primary">ARP 101.</h1>
    <div class="post-meta clearfix">
      <div class="post-date pull-left">
        Posted on
        <time datetime="2014-06-10T00:00:00Z">
          Jun 10, 2014
        </time>
      </div>
      <div class="pull-right">
        
      </div>
    </div>
  </header>
  <section>
    

<h2 id="arp:54e04ed81b5d8fe944612478ec74a32f">ARP</h2>

<p>ARP stands for Address Resolution Protocol. It&rsquo;s a protocol to translate network layer
(layer 3) IP addresses to link layer (layer 2) MAC addresses. Why would you need this?
Let&rsquo;s look at a simple example.</p>

<p><img src="http://static.misfra.me/images/posts/arp-101/hosts.png" alt="" />
</p>

<p>Here we have a couple of hosts. We need them to communicate with each other and they
both have IP addresses on the same subnet. They&rsquo;re connected to a layer 2 switch. We
want to have communication between these two servers over TCP, which is a layer above
IP. Remember, layer 2 devices don&rsquo;t know what IP addresses are! We can&rsquo;t just say,
&ldquo;hey switch, send these packets to 10.0.0.5.&rdquo; The switch doesn&rsquo;t know IP addresses.
The switch <em>does</em> speak Ethernet. Our servers are connected to the switch via an
Ethernet connection, so they&rsquo;ll communicate using Ethernet packets.</p>

<p><img src="http://static.misfra.me/images/posts/arp-101/ethernet_packet_format.png" alt="Ethernet packet structure" />
</p>

<p>Look, there are &ldquo;source&rdquo; and &ldquo;destination&rdquo; fields. We&rsquo;re going to use those. Whenever
a host sends an Ethernet packet, it fills those fields in. When the switch receives
the packet, it reads the destination field and sends the packet to whichever physical
port it needs to go to. It also looks at the source field to remember that the port
that it got the packet from has a host with that MAC address.</p>

<p>Every switch has a MAC table. This table shows which provides a mapping from MAC
addresses to physical ports.</p>

<p><img src="http://static.misfra.me/images/posts/arp-101/mac_table.png" alt="" />
</p>

<p>The switch adds a MAC entry to its internal table when it recognizes a new address
coming from one of its ports. But what if you don&rsquo;t know the destination&rsquo;s MAC address?
There is a special MAC address, FF:FF:FF:FF:FF:FF, which is a <em>broadcast</em> address. It&rsquo;s just
like a broadcast IP address in a subnet. Any Ethernet packets sent to the broadcast
address will be transmitted to every port on the switch. When a host receives a broadcast
packet, it&rsquo;ll know that it&rsquo;s a broadcast packet because of the destination address.
It will also know the MAC address that it came from, because of the source address.</p>

<p><img src="http://static.misfra.me/images/posts/arp-101/broadcast.png" alt="" />
</p>

<p>In the case of our two hosts, they don&rsquo;t know each other&rsquo;s MAC addresses. But that
does not mean that they are not able to communicate &ndash; they can send broadcast
packets! However, this isn&rsquo;t ideal because they&rsquo;re not just sending packets to each
other, but rather everyone on the network. It&rsquo;s like trying to have a conversation
in the middle of a large crowd. It doesn&rsquo;t work so well. This is where ARP comes in.</p>

<p>Using ARP, we can send a question to FF:FF:FF:FF:FF:FF and it&rsquo;ll be received by all
the hosts on the network: &ldquo;Who has IP address 10.0.0.5? Tell me, 10.0.0.2.&rdquo; Now, if
someone has IP address 10.0.0.5, they will respond by sending a packet to the MAC
addresse listed as the source of the original request. In addition, they now know
the MAC-IP pair of the requester! This means they won&rsquo;t have to send another ARP
&ldquo;who has&rdquo; request later on.</p>

<p>At this point, the two hosts know the other&rsquo;s MAC address and IP addresses. They can
communicate with each other directly!</p>

<p>Now, can you think of ways exploit this? Check out broadcast storms and ARP spoofing.</p>

  </section>
  <footer>
    <section class="author-info row">
      <div class="author-avatar col-md-2">
        
      </div>
      <div class="author-meta col-md-6">
        
        
      </div>
      
    </section>
    <ul class="pager">
      
      <li class="previous"><a href="http://misfra.me/halfway"><span aria-hidden="true">&larr;</span> Older</a></li>
      
      
      <li class="next"><a href="http://misfra.me/syntax-highlighting">Newer <span aria-hidden="true">&rarr;</span></a></li>
      
    </ul>
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'preetamjinka';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </footer>
</article>

  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      Copyright &copy; Preetam Jinka
    </div>
    <div class="sns-links hidden-print">
  
  <a href="https://twitter.com/PreetamJinka" target="_blank">
      <i class="fa fa-twitter"></i>
  </a>
  
  
  <a href="https://facebook.com/PreetamJinka" target="_blank">
    <i class="fa fa-facebook"></i>
  </a>
  
  
  <a href="https://github.com/PreetamJinka" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  <a href="https://jp.linkedin.com/in/preetamjinka" target="_blank">
    <i class="fa fa-linkedin"></i>
  </a>
  
</div>

  </footer>

  <script src="http://misfra.me/js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-37425054-1', 'auto');
    ga('send', 'pageview');
  </script>
  
  
</body>
</html>

